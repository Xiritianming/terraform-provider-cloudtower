---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cloudtower-terraform-provider Provider"
subcategory: ""
description: |-
---

# cloudtower-terraform-provider Provider

The `cloudtower-terraform-provider` provider is used to interact with the resources supported by CloudTower. The provider needs to be configured with the proper credentials before it can be used.

Use the navigation to the left to read about the available resources.

<!-- schema generated by tfplugindocs -->

## Schema

### Optional

- `cloudtower_server` (String) The CloudTower Server's endpoint, if not set, will use localhost.
- `password` (String) The user password for CloudTower API operations.
- `user_source` (String) The source type of user
- `username` (String) The username for CloudTower API operations.

## Features

### Vm

- create

  1. create blank vm
  2. create vm from template/content library template
  3. clone vm
  4. rebuild vm

- update
  1. update vm's cpu/memory
  2. cd-rom and disk
  3. nic
  4. ha
  5. power status

### Template and content library template

- clone from vm
- distribute to clusters (content library template only)

### Snapshot

- create snapshot for vm
- rollback to snapshot

### Datacenter and cluster

- connect cluster
- create datacenter
- move cluster in and out from datacenter

## Quick Start

Here is an example to create a VM with 2 disks and 1 cdrom on cluster "sample_cluster", with an already uploaded CD-ROM name contains ubuntu, also speiciy the host to run the VM on.

```hcl
terraform {
  required_providers {
    cloudtower = {
      version = "~> 0.1.7"
      source  = "registry.terraform.io/smartxworks/cloudtower"
    }
  }
}

locals {
  GB = 1024 * local.MB
  MB = 1024 * local.KB
  KB = 1024
}

// authentication block, password will be prompted when apply, otherwise you can use environment variables
provider "cloudtower" {
  username          = "username"
  user_source       = "LOCAL"
  cloudtower_server = "http://terraform.tower.com"
}

data "cloudtower_cluster" "sample_cluster" {
  name       = "sample_cluster"
}

data "cloudtower_vlan" "vm_vlan" {
  name       = "default"
  type       = "VM"
  cluster_id = data.data.cloudtower_cluster.sample_cluster.clusters[0].clusters[0].id
}

data "cloudtower_iso" "ubuntu" {
  name_contains = "ubuntu"
  cluster_id    = data.data.cloudtower_cluster.sample_cluster.clusters[0].clusters[0].id
}

data "cloudtower_host" "target_host" {
  management_ip_contains = "17.42"
  cluster_id             = data.cloudtower_cluster.sample_cluster.clusters[0].id
}

resource "cloudtower_vm" "tf_test" {
  name                = "tf-test"
  description         = "managed by terraform"
  cluster_id          = data.cloudtower_cluster.sample_cluster.clusters[0].id
  host_id             = data.cloudtower_host.target_host.hosts[0].id
  vcpu                = 4
  memory              = 8 * local.GB
  ha                  = true
  firmware            = "BIOS"
  status              = "STOPPED"
  force_status_change = true

  cd_rom {
    boot   = 1
    iso_id = data.cloudtower_iso.ubuntu.isos[0].id
  }


  disk {
    boot = 2
    bus  = "VIRTIO"
    vm_volume {
      storage_policy = "REPLICA_2_THIN_PROVISION"
      name           = "disk1"
      size           = 10 * local.GB
    }
  }

  disk {
    boot = 3
    bus  = "VIRTIO"
    vm_volume {
      storage_policy = "REPLICA_3_THICK_PROVISION"
      name           = "disk2"
      size           = 1 * local.GB
    }
  }

  cd_rom {
    boot   = 4
    iso_id = ""
  }

  nic {
    vlan_id = data.cloudtower_vlan.vm_vlan.vlans[0].id
  }
}
```
